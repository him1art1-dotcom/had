<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="classic">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ุญุงุถุฑ | ุจูุงุจุฉ ุงูุฅุดุฑุงู</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="css/tokens.css" />
    <link rel="stylesheet" href="css/leave.css" />
    <script defer src="./sql-wasm.js"></script>
  </head>
  <body>
    <div class="page-root">
      <div class="school-lock" data-school-lock hidden>
        <div
          class="school-lock__dialog"
          data-school-lock-dialog
          role="alertdialog"
          aria-modal="true"
          tabindex="-1"
        >
          <span class="school-lock__light" aria-hidden="true"></span>
          <div class="school-lock__content">
            <h2 class="school-lock__title">ุชู ุฅููุงู ุงููุฏุฑุณุฉ</h2>
            <p class="school-lock__message" data-school-lock-message>ุฑุงุฌุน ุงูุฏุนู ุงูููู</p>
          </div>
        </div>
      </div>
      <div class="leave-gate" data-access-gate hidden>
      <form class="leave-gate__form" data-access-form>
        <h2>ุชุฃููุฏ ูููุฉ ุงูุฏุฎูู</h2>
        <p>ูุฐู ุงูุจูุงุจุฉ ูุฎุตุตุฉ ูููุดุฑููู ุงููุนุชูุฏูู ูุงูุฅุฏุงุฑุฉ.</p>
        <div class="field">
          <label for="access-role">ุงุฎุชุฑ ุงูุตูุงุญูุฉ</label>
          <select id="access-role" name="accessRole" data-access-role-select required>
            <option value="">โ ุงุฎุชุฑ ุงูุฌูุฉ โ</option>
            <option value="general">ุงููุดุฑู ุงูุนุงู</option>
            <option value="class">ูุดุฑู ุงูุตููู</option>
            <option value="admin">ุงูุฅุฏุงุฑุฉ</option>
          </select>
        </div>
        <div class="field">
          <label for="access-id">ุฃุฏุฎู ุงููุนุฑู ุงููุฎุตุต</label>
          <input id="access-id" name="accessIdentifier" type="text" required data-access-identifier />
        </div>
        <button type="submit" class="primary">ุฏุฎูู</button>
        <p class="status" data-access-error></p>
      </form>
    </div>
      <main class="leave-shell">
      <header class="leave-header">
        <div class="leave-heading">
          <span class="badge">ุชูุณูู ุงูุฅุดุฑุงู</span>
          <p class="leave-school" data-school-name hidden></p>
          <h1>ุจูุงุจุฉ ุงูุฅุดุฑุงู</h1>
          <p>
            ุงูุทูู ุจุฅุฏุงุฑุฉ ุนูููุงุช ุงูุฅุดุฑุงูุ ุชุณุฌูู ุงูุทูุจุงุชุ ููุชุงุจุนุฉ ุงูุญุถูุฑ ูุญุธููุง ูู ููุงู ูุงุญุฏ.
            ูุชู ุญูุธ ูู ุชุบููุฑ ูุญูููุง ูุน ุจุซ ููุฑู ูุจููุฉ ุงููุงุฌูุงุช ุงููุชุตูุฉ.
          </p>
        </div>
        <div class="leave-meta">
          <div class="signal-indicator" data-store-indicator data-state="local">
            <span class="signal-indicator__light" aria-hidden="true"></span>
            <div class="signal-indicator__body">
              <span class="signal-indicator__title">ุฅุดุงุฑุฉ ูุถูุฆุฉ</span>
              <span class="signal-indicator__label" data-store-label>ุบูุฑ ูุชุตู</span>
              <span class="signal-indicator__message" data-store-message>ุฑุงุฌุน ุงูุฏุนู ุงูููู</span>
            </div>
          </div>
          <div class="leave-meta__access" data-access-chip hidden>
            <span class="leave-meta__label">ุงูุฏุฎูู ุนุจุฑ</span>
            <span class="leave-meta__value" data-access-chip-role>โ</span>
            <button type="button" class="ghost" data-access-signout>ุชุณุฌูู ุฎุฑูุฌ</button>
          </div>
        </div>
      </header>

      <section class="leave-hero" data-leave-hero hidden>
        <img alt="ุตูุฑุฉ ุชุฑุญูุจูุฉ ูุจูุงุจุฉ ุงูุฅุดุฑุงู" data-leave-hero-image />
      </section>

      <section class="leave-messaging" data-leave-messaging hidden>
        <article class="leave-message" data-morning-card hidden>
          <header class="leave-message__header">
            <span class="leave-message__icon" aria-hidden="true">๐</span>
            <div>
              <h2>ุฑุณุงูุฉ ุตุจุงุญูุฉ</h2>
              <p>ุงุจุฏุฃ ููู ุงูุฅุดุฑุงู ุจูุจุฑุฉ ูุชูุงุฆูุฉ.</p>
            </div>
          </header>
          <p class="leave-message__body" data-morning-text></p>
        </article>
        <article class="leave-message leave-message--list" data-announcement-card hidden>
          <header class="leave-message__header">
            <span class="leave-message__icon" aria-hidden="true">๐ฃ</span>
            <div>
              <h2>ุฅุนูุงูุงุช ุงูููู</h2>
              <p>ุชุฐููุฑุงุช ูุฅุฑุดุงุฏุงุช ุณุฑูุนุฉ ูููุฑูู.</p>
            </div>
          </header>
          <ul class="leave-message__list" data-announcement-list></ul>
        </article>
      </section>

      <div class="leave-tabs" data-tabs-host>
        <button type="button" class="leave-tab is-active" data-tab-trigger="permissions" aria-pressed="true">
          ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
        </button>
        <button type="button" class="leave-tab" data-tab-trigger="attendance" aria-pressed="false">
          ุณุฌูุงุช ุงูุญุถูุฑ
        </button>
      </div>

      <div class="leave-panel is-active" data-tab-panel="permissions">
        <section class="leave-card">
          <form data-permission-form>
          <div class="field">
            <label for="leave-student-id">ุฑูู ุงูุทุงูุจ</label>
            <input id="leave-student-id" name="studentId" type="text" inputmode="numeric" autocomplete="off" required data-id-input />
          </div>

          <div class="student-preview" data-student-preview hidden>
            <div>
              <h2 data-student-name>โ</h2>
              <p data-student-meta>โ</p>
            </div>
            <span class="student-status" data-student-status>ุฌุงูุฒ ููุชุณุฌูู</span>
          </div>

          <div class="field">
            <label for="leave-reason">ุณุจุจ ุงูุทูุจ</label>
            <input id="leave-reason" name="reason" type="text" placeholder="ูุซููุง: ุชูููู ุฅุดุฑุงูู" required data-reason-input />
          </div>

          <div class="field">
            <label for="leave-note">ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
            <textarea id="leave-note" name="note" rows="3" data-note-input></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="primary">ุชุณุฌูู ุงูุทูุจ</button>
            <p class="status" data-form-status></p>
          </div>
          </form>
        </section>

        <section class="leave-card">
          <header class="leave-card__header">
            <div>
              <h2>ุณุฌู ุงูุทูุจุงุช ููููู</h2>
              <p data-day-label>โ</p>
            </div>
            <button type="button" class="ghost" data-refresh-today>ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
          </header>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ุงูููุช</th>
                  <th>ุงูุทุงูุจ</th>
                  <th>ุงูุฑูู</th>
                  <th>ุงูุณุจุจ</th>
                  <th>ููุงุญุธุงุช</th>
                </tr>
              </thead>
              <tbody data-permission-table></tbody>
            </table>
          </div>
          <p class="form-hint" data-permission-summary></p>
        </section>
      </div>

      <div class="leave-panel" data-tab-panel="attendance" hidden>
        <section class="leave-card leave-card--panel">
          <header class="leave-card__header">
            <div>
              <h2>ุณุฌูุงุช ุงูุญุถูุฑ ุงููุฑุณูุฉ</h2>
              <p data-attendance-report-label>ูู ูุชู ุงุณุชูุงู ุฃู ุชูุฑูุฑ ุจุนุฏ.</p>
            </div>
            <div class="report-actions">
              <label class="report-select">
                <span>ุงูุชูุฑูุฑ ุงูุญุงูู</span>
                <select data-attendance-report-select>
                  <option value="">โ ูุง ุชูุฌุฏ ุชูุงุฑูุฑ โ</option>
                </select>
              </label>
              <button type="button" class="ghost" data-refresh-reports>ุชุญุฏูุซ</button>
            </div>
          </header>

          <div class="attendance-summary">
            <div class="summary-chip is-present">
              <span class="summary-chip__count" data-attendance-count="present">0</span>
              <span class="summary-chip__label">ุญุงุถุฑ</span>
            </div>
            <div class="summary-chip is-late">
              <span class="summary-chip__count" data-attendance-count="late">0</span>
              <span class="summary-chip__label">ูุชุฃุฎุฑ</span>
            </div>
            <div class="summary-chip is-absent">
              <span class="summary-chip__count" data-attendance-count="absent">0</span>
              <span class="summary-chip__label">ุบุงุฆุจ</span>
            </div>
            <div class="summary-chip is-total">
              <span class="summary-chip__count" data-attendance-count="total">0</span>
              <span class="summary-chip__label">ุฅุฌูุงูู ุงูุณุฌูุงุช</span>
            </div>
          </div>

          <div class="attendance-controls">
            <div class="status-chips" data-status-filters>
              <button type="button" class="chip is-active" data-status-toggle="present" aria-pressed="true">ุญุงุถุฑ</button>
              <button type="button" class="chip is-active" data-status-toggle="late" aria-pressed="true">ูุชุฃุฎุฑ</button>
              <button type="button" class="chip is-active" data-status-toggle="absent" aria-pressed="true">ุบุงุฆุจ</button>
            </div>
            <div class="filters-grid">
              <label>
                ุงูุตู
                <select data-filter-grade>
                  <option value="">ุฌููุน ุงูุตููู</option>
                </select>
              </label>
              <label>
                ุงููุตู
                <select data-filter-class>
                  <option value="">ุฌููุน ุงููุตูู</option>
                </select>
              </label>
              <label class="search-field">
                ุงูุจุญุซ
                <input type="search" placeholder="ุงุณู ุฃู ุฑูู ุงูุทุงูุจ" data-filter-search />
              </label>
            </div>
          </div>

          <div class="attendance-exports">
            <button type="button" class="ghost" data-attendance-export data-format="csv">CSV</button>
            <button type="button" class="ghost" data-attendance-export data-format="html">HTML</button>
            <button type="button" class="ghost" data-attendance-export data-format="pdf">PDF</button>
            <button type="button" class="ghost" data-attendance-export data-format="print">ุทุจุงุนุฉ</button>
          </div>

          <div class="table-wrapper table-wrapper--wide">
            <table>
              <thead>
                <tr>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุงูุงุณู</th>
                  <th>ุงูุฑูู</th>
                  <th>ุงูุตู</th>
                  <th>ุงููุตู</th>
                  <th>ููุช ุงููุตูู</th>
                </tr>
              </thead>
              <tbody data-attendance-table></tbody>
            </table>
          </div>
          <p class="form-hint" data-attendance-empty>ูุง ุชูุฌุฏ ุณุฌูุงุช ูุทุงุจูุฉ ูููุนุงููุฑ ุงูุญุงููุฉ.</p>
          <p class="status" data-report-status></p>
        </section>
      </div>

      <section class="leave-tip" data-general-tip hidden>
        <span class="leave-tip__icon" aria-hidden="true">โจ</span>
        <p class="leave-tip__text" data-general-tip-text></p>
      </section>
      </main>
      <footer class="site-footer" role="contentinfo">ยฉ ุฌููุน ุงูุญููู ูุญููุธุฉ | ุฃ. ููุซู ุงูุฒูุฑุงูู | Him.Art</footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="./js/env.js"></script>
    <script type="module" src="js/store/backend-factory.js"></script>
    <script type="module" src="js/backend-otherrest.js"></script>
    <script type="module" src="js/backend-supabase.js"></script>
    <script type="module" src="js/storage-ls.js"></script>
    <script type="module" src="js/storage-sql.js"></script>
    <script type="module" src="js/theme-utils.js"></script>
    <script type="module" src="js/remote-sync.js"></script>
    <script type="module" src="js/leave.js"></script>
    <script type="module">
      import { registerBackend } from './js/store/backend-factory.js';
      import localBackend from './js/store/backend-localstorage.js';
      import sqljsBackend from './js/store/backend-sqljs.js';
      import supabaseBackend from './js/store/backend-supabase.js';

      registerBackend(localBackend.name, localBackend);
      registerBackend(sqljsBackend.name, sqljsBackend);
      registerBackend(supabaseBackend.name, supabaseBackend);
    </script>
  </body>
</html>
